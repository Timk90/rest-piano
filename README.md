# rest-piano
# REST сервис пропускной системы. 
**Предоставляется следующее API взаимодействия с сервисом:**

1) Для проверки возможности входа (entrance=true) или выхода (entrance=false) для указанной комбинации пользователя и комнаты: 
/check?roomId=1&entrance=true&keyId=1 
<br>(пример http://localhost:8080/check?roomId=1&entrance=true&keyId=1).<br>
- При успешном запросе статус 200 OK - выход или вход разрешен.
- Если комната занята или пользователь найден в другой комнате статус 403 - вход запрещен 
- Если указан неправильный идентификатор пользователя или комнаты статус 500 - ошибка

2) Для непосредственного входа в комнату используется апи
/enter/{id} - где id идентификатор пользователя 
 <br>(пример: http://localhost:8080/enter/1).<br>
Для пользователя с указанным id, если он существует, будет подобрана комната
в соответствии с правилом: id пользователя должно нацело делиться на номер комнаты, если комната удовлетворяющая заданному критерию
уже занята кем-то, осуществляется поиск следующей свободной комнаты также удовлетворяющей критерию. Поиск осуществляется до 
тех пор пока не будет найдена комната, либо перебора всех комнат и получения данных о том, что нет совбодной комнаты удовлетворяющей
запросу. Если вход невозможен получаем ошибку 403.

3) Для выхода из комнаты используется апи
/leave/{id} - где id идентификатор пользователя 
 <br>(пример: http://localhost:8080/leave/1). <br>
Для пользователя с указанным id выполняется выход из комнаты, если он ранее занял какую-то комнату. Получаем ошибку 
403 если пользователь не занимает ни одну из комнат. 

4) Для проверки статуса и заселенности всех комнат 
 <br>(пример: http://localhost:8080/checkAll). <br> 
Апи для тестирования работы сервиса, лишний метод, который лишь позволяет удобнее проверить работу приложения.

Для взаимодействия с сервисом также реализован сканер (Scanner), который, возможно, следовало бы вынести в отдельный модуль.
Сканер реализует методы запросов к серверу и десериализации пришедшего в ответ Json-объекта, используя предоставленное апи для трех первых запросов.
Также возможно использование веб-интерфейса для выполнения запросов в браузере.
